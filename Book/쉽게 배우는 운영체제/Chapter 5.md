
# 📚 프로세스 동기화

## 📌 프로세스 간 통신

### 프로세스 간 통신의 종류

- 프로세스 내부 데이터 통신 : 하나의 프로세스 내에 2개 이상의 스레드가 존재하는 경우의 통신 ex)  전역 변수나 파일을 이용하여 데이터를 주고받음
- 프로세스 간 데이터 통신 : 같은 컴퓨터에 있는 여러 프로세스끼리 통신하는 경우 ex) 공용 파일 또는 운영체제가 제공하는 파이프를 사용
- 네트워크를 이용한 통신 : 여러 컴퓨터가 네트워크로 연결되어 있을 때의 통신 ex) 소켓, 원격 프로시저 호출

### 통신 방향에 따른 분류

- 양방향 통신   ex) 소켓 통신
- 반양방향 통신 ex) 무전기
- 단방향 통신   ex) 전역 변수, 파이프

### 통신 구현 방식에 따른 분류

- 대기가 있는 통신(동기화 통신) ex) 파이프, 소켓
- 대기가 없는 통신(비동기화 통신) -> 데이터를 받는 쪽은 바쁜 대기를 사용하여 데이터가 도착했는지 여부를 확인 ex) 전역변수, 파일

### 바쁜 대기

- 반복문을 무한 실행하며 기다리는 것
- 시스템 차원에서 큰 자원 낭비

### 전역 변수를 이용한 통신

- 공동으로 관리하는 메모리를 사용하여 데이터를 주고받는 것

### 파일을 이용한 통신

- 파일 열기 open()
- 읽기 또는 쓰기 연산 write(), read()
- 파일 닫기 close()

### 파이프를 이용한 통신

- 운영체제가 제공하는 동기화 통신 방식
- 단방향 통신
- 이름 없는 파이프 -> 서로 관련 있는 프로세스 간 통신에 사용
- 이름 있는 파이프 -> 서로 관련 없는 프로세스 간 통신에 사용

### 소켓을 이용한 통신

- 동기화 지원
- 양방향 통신

## 📌 공유 자원과 임계구역

### 공유 자원

- 여러 프로세스가 공동으로 이용하는 변수, 메모리, 파일 등등

### 임계 구역(critical section)

- 공유 자원 접근 순서에 따라 실행 결과가 달라지는 프로그램 영역
- 프로세스 실행 상황에서는 공유할 수 없는 자원

### 임계구역 해결 조건

- 상호 배제 => 한 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역에 들어갈 수 없음
- 한정 대기 => 어떤 프로세스도 무한 대기해서는 안됨
- 진행의 융통성 => 한 프로세스가 다른 프로세스의 진행을 방해해서는 안됨

## 📌 임계구역 해결 방법

### 교착 상태

- 프로세스가 살아 있으나 작업이 진행되지 못하는 상태

### 검사와 지정

- 하드웨어의 지원을 받아 명령어를 동시에 실행하여 임계구역 문제를 해결

### 세마포어

- Semaphore(n) => n은 공유 가능한 자원의 수
- P() => 잠금 => RS가 0보다 크면 1만큼 감소 or RS가 0보다 작으면 대기
- V() => 잠금 해제 및 동기화를 수행, 다른 프로세스에게 wake_up

### 모니터

- 공유 자원을 내부로 숨기고 공유 자원에 접근하기 위한 인터페이스만 제공
- 시스템 호출과 같은 개념

### 임계구역 해결방법

- 하드웨어적인 방법 : 검사와 지정
- 소프트웨어적인 방법 : 피터슨 알고리즘, 데커 알고리즘
- 세마포어
- 모니터

## 📌 [심화] 파일, 파이프, 소켓 프로그래밍

### 순차 파일

- 파일 내의 데이터가 한 줄로 길게 저장
- 순차적 접근 방식 사용
- 카세트 테이프

### open(), read()/write(), close()

- 모든 통신에 관련된 연산은 open() , read()/write() , close() 구조

### 네트워킹

- 여러 컴퓨터에 있는 프로세스간 통신 ex) 소켓, 원격 프로시저 호출

### 소켓 

- 클라이언트 : socket() ->                       connect() -> read()/write() -> close()
- 서버       : socket() -> bind() -> listen() ->  accept() -> read()/write() -> close()

