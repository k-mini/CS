
# 📚 컴퓨터의 구조와 성능 향상

## 📌 컴퓨터의 기본 구성

### 하드웨어 구성

- 컴퓨터는 중앙처리장치(CPU), 메인메모리, 입출력장치, 저장장치로 구성된다.
- 필수장치 : CPU, 메인메모리  주변장치: 입출력장치, 저장장치, 메인보드 등

### 버스

- 컴퓨터의 다양한 부품은 버스로 연결된다.
- 각 장치에 데이터를 전송하는 역할
- 각 장치를 연결하는 선의 집합이자 데이터가 지나다니는 통로

### 폰 노이만 구조

- 하드웨어는  그래도 둔 채 작업을 위한 프로그램만 교체하여 메모리에 올리는 방식
- __모든 프로그램은 메모리에 올라와야 실행할 수 있다.__

### 클록 Clock

- CPU의 속도와 관련된 단위
- 클록이 일정 간격으로 틱(tick)을 만들면 거기에 맞추어 CPU안의 모든 구성 부품이 작업을 한다.
- 펄스 또는 클록틱이라고도 부름
- 버스에는 여러 개의 부품이 연결되어 있는데, 메인보드의 클록이 틱을 보낼 때마다 데이터를 보내거나 받는다.

### 헤르츠

- 클록틱이 발생하는 속도를 나타내는 단위
- 1Hz -> 1초에 한번의 클록틱이 발생했다.
- 3.4GHz는 1초에 클록틱이 3,400,000,000 번 발생하여 1초에 약 34억번의 연산(작업)을 할 수 있다.

### 시스템 버스

- 메모리와 주변장치를 연결하는 버스
- FSB(Front-Side Bus), 전면 버스라고도 부름
- 1.3MHz의 시스템 버스를 가진 메인보드에 같은 속도를 가진 부품이 연결되면 메모리도 1.3Mhz 속도로 작동. 만약에 낮은속도가 연결되면 그 속도에 맞춰 작동

### CPU 내부 버스

- CPU 내부 버스는 CPU 내부 장치를 연결하는 버스, BSB(Back Side Bus), 후면버스라고 부름
- CPU는 CPU 내부 버스로 작동하고 메모리는 시스템 버스의 속도로 작동하기 때문에, 두 버스의 속도차로 인해 작업이 지연되는 문제가 있음

## 📌 CPU와 메모리

### CPU의 기본 구성

- 산술논리 연산장치, 레지스터, 제어장치

### 산술논리 연산장치(ALU)

- 데이터의 덧셈, 뺄셈, 곱셈, 나눗셈 같은 산술 연산과 AND, OR 같은 논리 연산을 수행

### 제어장치

- CPU에서 작업을 지시하는 역할

### 레지스터

- CPU 내에 데이터를 임시로 보관하는 곳

### 레지스터의 종류

- 사용자 가시 레지스터(데이터 레지스터, 주소 레지스터)
- 사용자 불가 레지스터(프로그램 카운터, 명령어 레지스터, 메모리 주소 레지스터, 메모리 버퍼 레지스터)

### 데이터 레지스터

- 대부분의 레지스터가 데이터 레지스터
- 일반 레지스터 또는 범용 레지스터라고 부름
- 메모리에서 가져온 데이터를 임시로 보관할 때 사용

### 주소 레지스터

- 데이터 또는 명령어가 저장된 메모리의 주소를 저장

### 프로그램 카운터

- 다음에 실행할 명령어의 주소를 기억하고 있다가 제어장치에 전달, 명령어 포인터라고도 함

### 명령어 레지스터

- 현재 실행중인 명령어를 저장.
- 제어장치는 명령어 레지스터에 있는 명령을 해석 후 외부장치에 적절한 제어 신호를 보낸다.

### 메모리 주소 레지스터

- 메모리 관리자가 메모리에서 데이터를 가져오거나 반대로 메모리로 데이터를 보낼때 주소를 지정하기 위해 사용 ( 메모리 관리자가 접근해야 할 메모리의 주소를 저장)

### 메모리 버퍼 레지스터

- 메모리관리자가 메모리에서 가져온 데이터나 메모리로 옮겨갈 데이터를 임시로 저장

### 프로그램 상태 레지스터

- 연산 결과가 양수인지, 음수인지, 0이 아닌지 또는 자리 올림 유무 등을 저장

### 버스의 종류

- 제어 버스 
- 주소 버스
- 데이터 버스

### 제어 버스

-  다음에 어떤 작업을 할지 지시하는 제어 신호(데이터를 가져올지, 처리한 데이터를 옮겨놓을지)가 오고감
-  양방향
-  CPU의 제어 장치, 메모리, 주변장치와 연결
 
### 주소 버스

- 메모리의 데이터를 읽거나 쓸 때 어느 위치에서 작업할 것인지를 알려주는 위치 정보(주소)가 오고 감
- 메모리 주소 레지스터, 메모리, 주변장치와 연결
- CPU에서 나가는 단방향

### 데이터 버스

- 제어 버스가 어떤 작업을 할지 신호를 보내고 주소 버스가 위치 정보를 전달하면 데이터가 데이터 버스에 실려 목적지까지 이동.
- 메모리 버퍼 레지스터, 메모리, 주변장치와 연결되어 있음
- 양방향

### 메모리 종류

- 크게 램(RAM) 과 롬(ROM)으로 구분

### 램(RAM)

- 휘발성 메모리 (DRAM, SRAM, SDRAM)
- 비휘발성 메모리 (플래시 메모리, FRAM, PRAM,SSD)

### 롬(ROM)

- 데이터를 한 번 저장하면 바꿀 수 없음
- 이러한 특성 때문에 바이오스를 롬에 저장
- mask ROM, PROM, EPROM

### 메모리 보호

- 경게 레지스터와 한계 레지스터를 이용해 메모리를 보호

### 부팅

- 운영체제를 메모리에 올리는 과정
- 전원을 키면 바이오스가 실행 -> 하드웨어 점검 -> 마스터 부트레코드에 저장된 부트스트랩 코드를 메모리에 올림 -> 운영체제 메모리에 올려서 실행
- 마스터 부트 레코드 : 하드웨어의 첫 번째 섹터


## 📌 컴퓨터 성능 향상 기술

### 버퍼

- 일정량의 데이터를 모아 옮김으로써 속도의 차이를 완화하는 장치

### 스풀

- 버퍼의 일종
- 버퍼와 다른점은 버퍼는 어떤 프로그램이 사용하는 데이터든 버퍼가 차면 이동이 시작됨(프로그램들이 버퍼를 공유) 그러나 스풀러는 한  인쇄물이 완료될 떄까지 다른 인쇄물이 끼어들 수 없으므로 프로그램간에 배타적

### 캐시

- 버퍼와 마찬가지로 속도 차이를 완화하는 목적이나 조금 다름
- 메모리의 데이터를 미리 가져와 저장해두는 임시 장소

### 지역성

- 현재 위치에 가까운 데이터가 멀리 있는 데이터보다 사용될 확률이 더 높다.

### 캐시의 즉시 쓰기와 지연 쓰기

- 즉시 쓰기 : 캐시의 데이터가 변경되면 이를 즉시 메모리에 반영하는 방식
- 지연 쓰기 : 캐시의 데이터가 변경되면 이를 즉시 반영하는 것이 아니라 변경된 내용을 모아서 주기적으로 반영하는 방식(카피백이라고 함)

### 캐시의 종류

- 명령어와 데이터를 구분 없이 모든 자료를 가져오는 일반 캐시 (L2 캐시)
- 명령어와 데이터를 구분하여 가져오는 특수 캐시 (L1 캐시)

### 폴링 방식

- CPU가 직접 입출력장치에서 데이터를 가져오거나 내보냄

### 인터럽트 방식

- CPU의 작업과 저장장치의 데이터 이동을 독립적으로 운영
- 입출력 관리자가 CPU에 보내는 완료 신호를 인터럽트라고 한다.
- CPU는 완료 신호를 받으면 하던 일을 중단하고 옮겨진 데이터를 처리한다.
- 
### 인터럽트 방식 동작 과정

- CPU가 입출력 관리자에게 입출력 명령을 내린다.
- 입출력 관리자는 명령받은 데이터를 메모리에 가져다놓거나 메모리에 있는 데이터를 저장장치로 옮김
- 데이터 전송이 완료되면 입출력 관리자는 완료 신호를 CPU에 보낸다.

### 직접 메모리 접근

- 기존 메모리는 CPU만 접근 권한을 가지고 있어서 입출력 관리자는 접근이 불가
- __CPU에 허락없이 메모리에 접근할 수 있는 권한__

### 메모리 매핑 입출력

- 메모리에서 CPU가 사용하는 데이터와 입출력장치가 사용하는 데이터가 섞이지 않도록 메모리에 일정 공간을 입출력에 할당하는 기법

## 📌 병렬 처리

### 병렬 처리 고려 사향

- 상호 의존성이 없어야 가능
- 각 단계의 시간을 거의 일정하게 맞춰야 병렬처리가 원만하게 이뤄짐

### CPU 명령어 실행 과정

- 명령어 패치 : 다음 실행할 명령어를 명령어 레지스터에  저장
- 명령어 해석 : 명령어를 해석
- 실행 : 해석한 결과를 토대로 명령어를 실행
- 쓰기 : 실행된 결과를 메모리에 저장

### 파이프라인 기법

- 명령어를 여러 단계로 분할
- 각 단계를 동시에 처리하는 하드웨어를 독립적으로 구성
- 명령어 처리 단계마다 독립적으로 구성한 하드웨어로 각 단계를 쉬지 않고  명령어를 처리

### 슈퍼스칼라  기법

- 코어를 여러 개 구성하여 복수의 명령어가 동시에 실행되도록 하는 방식
- 대부분 파이프라인 기법과 동일하지만 코어를 2개 구성하여 각 단계에서 동시에 실행되는 명령어가 2개

### 슈퍼파이프라인 기법

- 기존 파이프라인 기법을 강화한 것
- 파이프라인 기법은 한 클록마다 하나의 명령어를 실행하지만, 슈퍼파이프라인 기법은 파이프라인의 각 단계를 세분화하여 한 클록 내에 여러 명령어를 처리

### 슈퍼파이프라인 슈퍼스칼라 기법

- 슈퍼파이프라인 기법을 여러개의 코어에서 동시에 수행하는 방식

### VLIW 기법

- 앞의 병렬 처리 기법들은 병렬 처리를 지원하는 하드웨어적인 방법
- VILW 기법은 CPU가 병렬 처리를 지원하지 않을 경우 소프트웨어적으로 병렬 처리를 하는 방법
- 앞의 병렬 처리 기법들은 명령어 실행 시 병렬 처리가 이루어지지만, VLIW 기법은 컴파일 시 병렬 처리가 이루어짐
