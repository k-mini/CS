
# 📚 파일 시스템

## 📌 파일과 파일 시스템

### 파일 시스템

- 파일을 보관하고 관리하는 파일 관리자를 두어 저장장치의 전체 관리를 맡기는 시스템
- 사용자가 직접 개입하면 다른 사용자의 파일을 훼손하거나 저장장치 내부를 어지럽혀 문제를 일으킬 수 있다.
- 파일 관리자, 파일 테이블이 존재
- 윈도우: FAT, NTFS   유닉스 : I-node

### 파일 디스크립터

- 사용자가 특정 파일에 접근하려면 파일 관리자로부터 파일에 접근할 수 있는 권한(키)를 획득해야 한다.  
파일 접근 권한을 파일 디스크립터(file descriptor)라고 한다.

### 파일 시스템의 기능

| 기능 | 설명 |
| ---- | ---- |
| 파일 구성 | 사용자의 요구에 따라 파일과 디렉터리를 만든다. |
| 파일 관리 | 파일 생성, 수정, 삭제 등의 관리를 하고, 수시로 조각 모음을 하여 사용자가 파일에 빨리 접근할 수 있도록 한다. |
| 접근 권한 관리 | 다른 사용자로부터 파일을 보호하기 위해 접근 권한을 관리한다. |
| 접근 방법 제공 | 파일을 읽고 쓰고 실행할 수 있도록 사용자에게 접근 방법을 제공한다. |
| 무결성 보장 | 파일의 내용이 손상되지 않도록 무결성을 보장한다. |
| 백업과 복구 | 사고로부터 파일을 보호하기 위해 백업과 복구 작업을 한다. |
| 암호화 | 파일을 암호화하여 악의적인 접근으로부터 파일을 보호 한다. |

### 블록과 파일테이블

- 데이터는 운영체제와 저장장치 간에 블록 단위로 전송
- 파일 관리자는 여러 섹터를 묶어 하나의 블록으로 만들고, 블록 하나에 주소 하나를 배정한다.

### 파일 분류와 확장자

- 실행 파일 : 운영체제가 메모리로 가져와 CPU를 이용하여 작업을 하는 파일. 즉 사용자의 요청으로 프로세스가 된 파일 ex) 이미지 뷰어 프로그램, 워드프로세서
- 데이터 파일 : 실행 파일이 작업하는 데 필요한 데이터를 모아놓은 파일. 연결 프로그램으로 열 수 있다. ex) 이미지 뷰어 프로그램의 사진파일, 뮤직 플레이어의 음악 파일, 워드프로세서의 문서파일
- 파일 구성 :  파일 헤더, 데이터
- 확장자 : 파일의 성격을 파악

### 파일 속성

- 파일 속성은 각 파일 헤더에 기록되며, 운영체제는 이런 파일 헤더를 파일 테이블에서 관리한다.

| 속성 |  특징 |
| ---- | ----- |
| name | 파일의 이름 |
| type | 파일의 종류 |
| size | 파일의 크기 |
| time | 파일의 접근 시간 |
| location | 파일의 위치 |
| accessibility | 파일의 접근 권한 |
| owner | 파일의 소유자 |

- 데이터 파일마다 자신에게 필요한 파일 속성을 따로 정의하여 사용하기도 한다. 이는 파일의 고유 헤더에 기록 된다.
- 파일 헤더 : 파일테이블에서 관리. 일반적인 내용, 저장장치에서 위치
- 고유 헤더 : 데이터 파일에는 응용 프로그램이 필요로 하는 고유 헤더가 존재. 파일의 버전 번호, 특수 정보 등등

### 파일 작업의 유형

- 파일 작업(파일 연산) => 파일을 지우거나 이름을 바꾸는 것과 같이 파일을 변경하는 것  
- 파일 자체를 변경하는 작업 => 윈도우의 \[파일탐색기\]에서 이루어지는 작업 
 
| 작업 | 설명 |
| ---- | ---- |
| open | 파일을 열기 |
| copy | 파일을 복사 |
| close | 파일을 닫기 |
| rename | 파일의 이름을 변경 |
| create | 새로운 파일을 생성 |
| list | 파일을 나열 |
| remove | 파일을 이동 |
| search | 파일을 찾기 |

- 파일 내용을 변경하는 작업 => 프로세스 입장에서 수행하는 것

| 작업 | 설명 |
| ---- | ---- |
| open() | 파일을 열기 |
| write() | 파일에 새로운 내용을 쓰기 |
| create() | 새로운 파일을 생성 |
| update() | 파일 내용 중 일부를 변경 |
| close() | 파일을 닫기 |
| insert() | 파일에 새로운 내용을 추가 |
| read() | 파일 내용을 읽기 |
| delete() | 파일 내용 중 일부를 지우기 |

### 파일 구조

- 순차 파일 구조 => 파일 내용이 하나의 긴 줄로 늘어선 형태. 순차 접근으로 접근이 가능 ex) 카세트 테이프
    - 장점 : 모든 데이터가 순서대로 기록되기 때문에 저장 공간에 낭비되는 부분이 없음, 구조가 단순, 순서대로 읽거나 저장할 때 매우 빠름
    - 단점 : 데이터의 변경이 잦을 때 적절하지 않음, 앞에서부터 순서대로 움직여야 함
- 인덱스 파일 구조 => 순차파일 구조에 인덱스 테이블을 추가한 구조 => 순처접근, 직접 접근  ex) 플로피디스크, CD-ROM, 하드디스크
    - 인덱스 순차접근 : 인덱스를 이용한 접근 방식
    - 특징 : 데이터의 빠른 접근이 필요한 시스템(데이터베이스)에 사용
    - 장점 : 다양한 접근이 가능
    - 단점 : ?
- 직접 파일 구조 => 저장하려는 데이터의 특정 값에 어떤 관계를 정의하여 물리적인 주소로 변환하는 파일 구조
    - 해시 함수를 이용
    - 특정(해시) 함수를 이용하여 직접 접근이 가능, 해시 함수의 선정이 중요 (전체 데이터가 고르게 저장될 수 있는 해시 함수를 찾아야 함)
    - 장점: 데이터 접근이 매우 빠르다.
    - 단점 : 빈 공간이 생겨서 저장장치 이용 효율이 떨어질 수 있음.(공간 효율성이 떨어진다) 잘못된 해시 함수 선정시 데이터가 고르게 분포되지 않음

## 📌 디렉터리 구조



## 📌 디스크 파일 할당



## 📌 [심화] 유닉스 파일 특징

